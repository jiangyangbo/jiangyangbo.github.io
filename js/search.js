(function(){var e=document.getElementById("search-key"),t=document.getElementById("search-local"),n=document.getElementById("search-form"),i=document.getElementById("result-mask"),r=document.getElementById("result-wrap"),s=document.getElementById("search-result"),o=document.getElementById("search-tpl").innerHTML,c,u,a;if(window.innerWidth){c=parseInt(window.innerWidth)}else if(document.body&&document.body.clientWidth){c=parseInt(document.body.clientWidth)}if(window.innerHeight){u=parseInt(window.innerHeight)}else if(document.body&&document.body.clientHeight){u=parseInt(document.body.clientHeight)}i.style.width=c+"px";i.style.height=u+"px";function d(e){if(!a){var t=new XMLHttpRequest;t.open("GET","/content.json",true);t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response||this.responseText);a=t instanceof Array?t:t.posts;e(a)}else{console.error(this.statusText)}};t.onerror=function(){console.error(this.statusText)};t.send()}else{e(a)}}function l(e,t){return f(e.title,t)||f(e.text,t)}function f(e,t){t.lastIndex=0;return t.test(e)}function h(e){var t="";if(e.length){t=e.map(function(e){return p(o,{title:e.title,path:e.path,content:m(e.text)})}).join("")}else{t='<div class="tips"><p>没有找到相关结果!</p></div>'}s.innerHTML=t}function m(t){var n=e.value;var i=t.indexOf(n);var r=t.replace(n,"<b>"+n+"</b>");if(i>0){return r.substr(i-15,45)}}function p(e,t){return e.replace(/\{\w+\}/g,function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""})}function g(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function v(e,t){if(!g(e,t))e.className+=" "+t}function y(e,t){if(g(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function w(t){var n=this.value.trim();if(!n){h("");return}var s=new RegExp(n.replace(/[ ]/g,"|"),"gmi");d(function(e){var t=e.filter(function(e){return l(e,s)});h(t)});t.preventDefault();y(r,"hide");y(i,"hide");e.onfocus=function(){y(r,"hide");y(i,"hide")}}e.onfocus=function(){e.addEventListener("input",w)};i.onclick=function(){v(r,"hide");v(i,"hide")}})();